# Production Environment Configuration
# Task Scheduler Secure Environment Setup

# Copy this file to .env.production and update with your actual values
# NEVER commit .env files to version control

# ============================================
# SERVER CONFIGURATION
# ============================================

# Server binding and networking
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
SERVER_WORKERS=4
MAX_CONNECTIONS=1000

# Development vs Production mode
NODE_ENV=production
DEBUG_MODE=false

# ============================================
# DATABASE CONFIGURATION
# ============================================

# SQLite database configuration
DB_PATH=/opt/taskscheduler/data/task_scheduler_secure.db
DB_BACKUP_PATH=/opt/taskscheduler/backups/
DB_BACKUP_INTERVAL=3600
DB_RETENTION_DAYS=30

# Database encryption (if using SQLCipher)
# Generate with: openssl rand -hex 32
DB_ENCRYPTION_KEY=your-32-character-encryption-key-here

# ============================================
# SECURITY CONFIGURATION
# ============================================

# Session management
SESSION_SECRET=your-session-encryption-secret-here
SESSION_TIMEOUT=3600
JWT_SECRET=your-jwt-signing-secret-here
CSRF_SECRET=your-csrf-token-secret-here

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_PROGRESSIVE_BLOCK=true

# Authentication security
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=1800
PASSWORD_MIN_LENGTH=8
REQUIRE_PASSWORD_COMPLEXITY=true

# API security
API_KEY_REQUIRED=false
API_KEY_SECRET=your-api-key-secret-here

# ============================================
# SSL/TLS CONFIGURATION
# ============================================

# SSL certificate paths
SSL_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem
SSL_CA_PATH=/etc/letsencrypt/live/yourdomain.com/chain.pem

# SSL settings
SSL_PROTOCOLS=TLSv1.2,TLSv1.3
SSL_CIPHERS=ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
SSL_PREFER_SERVER_CIPHERS=off

# ============================================
# LOGGING CONFIGURATION
# ============================================

# Log levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_PATH=/var/log/taskscheduler/
AUDIT_LOG_RETENTION_DAYS=90
SECURITY_LOG_RETENTION_DAYS=365

# Log file rotation
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# ============================================
# CORS AND DOMAIN CONFIGURATION
# ============================================

# Allowed origins for CORS
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
FRONTEND_URL=https://yourdomain.vercel.app

# Domain configuration
BACKEND_DOMAIN=api.yourdomain.com
FRONTEND_DOMAIN=yourdomain.vercel.app

# ============================================
# MONITORING AND ALERTING
# ============================================

# Health check configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# Monitoring endpoints
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Alerting configuration
ALERT_EMAIL=admin@yourdomain.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=alerts@yourdomain.com
SMTP_PASS=your-smtp-password

# Webhook alerts
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your-webhook
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your-webhook

# ============================================
# BACKUP AND RECOVERY
# ============================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# Cloud backup (optional)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=your-backup-bucket
AWS_REGION=us-east-1

# ============================================
# PERFORMANCE CONFIGURATION
# ============================================

# Memory limits
MAX_MEMORY_USAGE=512MB
MAX_HEAP_SIZE=256MB

# Connection pooling
DB_CONNECTION_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30

# Caching
CACHE_ENABLED=true
CACHE_TTL=300
CACHE_MAX_SIZE=100MB

# ============================================
# FEATURE FLAGS
# ============================================

# Feature toggles
ENABLE_REGISTRATION=true
ENABLE_PASSWORD_RESET=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_TWO_FACTOR_AUTH=true
ENABLE_FACE_RECOGNITION=true
ENABLE_API_DOCUMENTATION=false

# ============================================
# THIRD-PARTY INTEGRATIONS
# ============================================

# Email service (SendGrid, AWS SES, etc.)
EMAIL_SERVICE=sendgrid
SENDGRID_API_KEY=your-sendgrid-api-key
FROM_EMAIL=noreply@yourdomain.com

# SMS service (Twilio, AWS SNS, etc.)
SMS_SERVICE=twilio
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# File storage (AWS S3, CloudFlare R2, etc.)
STORAGE_SERVICE=s3
STORAGE_BUCKET=your-file-storage-bucket

# ============================================
# DEVELOPMENT OVERRIDES
# ============================================
# These settings override production values in development

# Uncomment for development
# NODE_ENV=development
# DEBUG_MODE=true
# LOG_LEVEL=DEBUG
# SSL_ENABLED=false
# RATE_LIMIT_REQUESTS=1000
# DB_PATH=./task_scheduler_dev.db